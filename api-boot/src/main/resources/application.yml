server:
  port: 8989
  tomcat:
    threads:
      max: 50        # max concurrent requests (2–3x DB pool size)
      min-spare: 10  # keep a few threads ready

minio:
  endpoint: http://142.171.47.231:9000
  accessKey: ipaeo0kFgGuW6dG4SIXu
  secretKey: yrr6DmWAyhMBTDFXXEZGuDPoD74CrwNUgmAouO3N
  bucket: admin
  defaultPresignExpirySeconds: 3600
  publicBaseUrl: ""

file:
  categories:
    AVATAR:
      prefix: avatar
      maxSizeMb: 5
      allowedExtensions: [ "png", "jpg", "jpeg", "gif", "bmp" ]
      visibility: PUBLIC
      presignExpirySeconds: 3600
    EXCEL:
      prefix: excel
      maxSizeMb: 20
      allowedExtensions: [ "xls", "xlsx" ]
      visibility: PRIVATE
      presignExpirySeconds: 1800
    DOC:
      prefix: doc
      maxSizeMb: 20
      allowedExtensions: [ "pdf", "doc", "docx" ]
      visibility: PRIVATE
      presignExpirySeconds: 1800
    FILE:
      prefix: file
      maxSizeMb: 50
      allowedExtensions: [ "png", "jpg", "jpeg", "pdf", "zip", "rar", "txt" ]
      visibility: PRIVATE
      presignExpirySeconds: 1800
    ATTACHMENT:
      prefix: attachment
      maxSizeMb: 50
      allowedExtensions: [ "png", "jpg", "jpeg", "pdf", "zip", "rar", "txt" ]
      visibility: PRIVATE
      presignExpirySeconds: 1800

app:
  name: Gavin
  version: 1.0.0
  copyrightYear: 2025
  profile: ./uploads
  addressEnabled: false
  captchaType: math

token:
  header: Authorization
  secret: a8f9e5c3b7d1f4a2c6e8d9b3a1f7c5d2b9e7f6c4a2d8b1f3e9c7d5a3b1f9e4c2a8f9e5c3b7d1f4a2c6e8d9b3a1f7c5d2b9e7f6c4a2d8b1f3e9c7d5a3b1f9e4c2
  expireTime: 300000

user:
  password:
    maxRetryCount: 5
    lockTime: 10

spring:
  datasource:
    # Default data source (for fallback)
    type: com.zaxxer.hikari.HikariDataSource

    master:
      driver-class-name: com.mysql.cj.jdbc.Driver
      url: jdbc:mysql://localhost:3306/ry-vue?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai&characterEncoding=UTF-8
      username: root
      password: 123456
      hikari:
        maximum-pool-size: 15         # max connections
        minimum-idle: 5               # keep 5 idle
        idle-timeout: 30000           # close idle > 30s
        connection-timeout: 20000     # wait 20s max for connection
        max-lifetime: 1800000         # 30min connection lifetime
        pool-name: MasterHikariPool   # custom pool name

    slave:
      driver-class-name: com.mysql.cj.jdbc.Driver
      url: jdbc:mysql://localhost:3306/ry-vue-slave?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai&characterEncoding=UTF-8
      username: root
      password: 123456
      hikari:
        maximum-pool-size: 10
        minimum-idle: 3
        idle-timeout: 30000
        connection-timeout: 20000
        max-lifetime: 1800000
        pool-name: SlaveHikariPool

  task:
    execution:
      pool:
        core-size: 5           # threads always available for @Async
        max-size: 20           # max async threads
        queue-capacity: 100    # queue if all threads busy
        keep-alive: 60s
      thread-name-prefix: "Async-" # thread name prefix

  data:
    redis:
      host: localhost
      port: 6379
      username: default          # optional, only if ACL is enabled
      password: 123456
      database: 0
      timeout: 10s
      lettuce:
        pool:
          min-idle: 0
          max-idle: 8
          max-active: 8
          max-wait: -1ms

  jpa:
    hibernate:
      ddl-auto: update  # dev  update，PROD  validate
    show-sql: true
    properties:
      hibernate.format_sql: true
      hibernate.session_factory.statement_inspector: com.api.framework.interceptor.TrackSQLDetailInspector
    database-platform: org.hibernate.dialect.MySQL8Dialect
  jackson:
    time-zone: Asia/Shanghai
    date-format: yyyy-MM-dd HH:mm:ss

  security:
    oauth2:
      client:
        registration:
          github:
            client-id: Ov23liVJRbXK3RVNMyz2
            client-secret: 31503edcef8ca5861ecc44583b66889c025ff6f9
            scope: user:email
            redirect-uri: "{baseUrl}/login/oauth2/code/{registrationId}"
            frontend-redirect: "http://localhost:5173/oauth/callback"
        provider:
          github:
            authorization-uri: https://github.com/login/oauth/authorize
            token-uri: https://github.com/login/oauth/access_token
            user-info-uri: https://api.github.com/user
            user-name-attribute: id




